package codeTest;

import java.util.ArrayList;
import java.util.Scanner;

public class 감시_주영씨{
	static int N, M;
	static int[][] Room = new int[10][10];
	static boolean check[][] = new boolean[10][10];
	int dx[] = { 0,1,0,-1 };
	int dy[] = { 1,0,-1,0 };
	int MMin = Integer.MAX_VALUE;
	int NNN = 0;
	static ArrayList<Info> CCTV;
	static class Info{
		int row;
		int col;
		int num;
		public Info(int r, int c, int n) {
			row = r;
			col = c;
			num = n;
		}
	}

	int main()
	{

		//입력
		Scanner sc = new Scanner(System.in);
		N = sc.nextInt();
		M = sc.nextInt();
		for (int i = 0; i < N; i++)
		{
			for (int j = 0; j < M; j++)
			{
				Room[i][j] = sc.nextInt();
			if (Room[i][j] < 5 && Room[i][j]>0) {
				CCTV.push_back({ i,j,Room[i][j] });
				NNN++;
			}
			else if (Room[i][j] == 5)
			{
				check[i][j] = true;
				one(i, j, 0);
				one(i, j, 1);
				one(i, j, 2);
				one(i, j, 3);
			}
			else if (Room[i][j] == 6)
				check[i][j] = true;
			}
		}

		//재귀로 cctv돌리기
		Run(0);

		cout << MMin << "\n";

		return 0;
	}


	void one(int x, int y,int a)
	{
		int nx = x+dx[a]; int ny = y+dy[a];
		while (Room[nx][ny] < 5&& nx >= 0 && ny >= 0 && nx < N && ny < M)
		{
			if (check[nx][ny] == true)continue;
			check[nx][ny] = true;
			nx += dx[a];
			ny += dy[a];
		}
	}


	void clearone(int x, int y, int a)
	{
		int nx = x + dx[a]; int ny = y + dy[a];
		while (Room[nx][ny] < 5 && nx >= 0 && ny >= 0 && nx < N && ny < M)
		{
			if (check[nx][ny] == false)continue;
			check[nx][ny] = false;
			nx += dx[a];
			ny += dy[a];
		}
	}


	void Run(int idx)
	{

		if (idx == NNN)
		{
			//사각지대세기
			int count = 0;
			for (int i = 0; i < N; i++)
			{
				for (int j = 0; j < M; j++)
				{
					if (check[i][j] == false) count++;
				}
			}
			MMin = min(MMin, count);

			return;
		}

		info cctvN = CCTV[idx];

		if (cctvN.num == 1)
		{
			for (int i = 0; i < 4; i++) {


				check[cctvN.x][cctvN.y] = true;
				one(cctvN.x, cctvN.y, i);
				Run(idx + 1);
				clearone(cctvN.x, cctvN.y, i);
				check[cctvN.x][cctvN.y] = false;
			}
		}
		else if (cctvN.num == 2)
		{
			for (int i = 0; i < 2; i++)
			{
				check[cctvN.x][cctvN.y] = true;
				one(cctvN.x, cctvN.y, i);
				one(cctvN.x, cctvN.y, i+2);
				Run(idx + 1);
				clearone(cctvN.x, cctvN.y, i);
				clearone(cctvN.x, cctvN.y, i + 2);
				check[cctvN.x][cctvN.y] = false;
			}
		}
		else if (cctvN.num == 3)
		{
			for (int i = 0; i < 4; i++)
			{
				check[cctvN.x][cctvN.y] = true;
				one(cctvN.x, cctvN.y, i);
				one(cctvN.x, cctvN.y, (i + 1)%4);
				Run(idx + 1);
				clearone(cctvN.x, cctvN.y, i);
				clearone(cctvN.x, cctvN.y, (i + 1) % 4);
				check[cctvN.x][cctvN.y] = false;
			}
		}
		else if (cctvN.num == 4)
		{
			for (int i = 0; i < 4; i++)
			{
				check[cctvN.x][cctvN.y] = true;
				one(cctvN.x, cctvN.y, i);
				one(cctvN.x, cctvN.y, (i + 1) % 4);
				one(cctvN.x, cctvN.y, (i + 2) % 4);
				Run(idx + 1);
				clearone(cctvN.x, cctvN.y, i);
				clearone(cctvN.x, cctvN.y, (i + 1) % 4);
				clearone(cctvN.x, cctvN.y, (i + 2) % 4);
				check[cctvN.x][cctvN.y] = false;
			}
		}
	}
}
