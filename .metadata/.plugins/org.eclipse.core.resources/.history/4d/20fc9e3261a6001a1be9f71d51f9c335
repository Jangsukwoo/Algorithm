package 공채대비;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Arrays;
import java.util.HashSet;
import java.util.StringTokenizer;
/*
 * 12:30~
1
8
8 7 6 5 4 3 2 1 

1
7
7 6 7 6 6 7 3

1
6
2 3 4 5 6 2
왜 답이 5?
 */
public class 텀프로젝트 {
	static int[] students;
	static int N;
	static BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
	static StringTokenizer st;
	static boolean[] visit;
	static boolean[] noncycle;
	static int answer;
	static int team;
	static int start;
	static boolean newFlag;
	static int answer2;
	static HashSet<Integer> set;
	public static void main(String[] args) throws IOException {
		int T = Integer.parseInt(br.readLine());
		for(int testcase=1;testcase<=T;testcase++) {
			setData();
			logic();
			System.out.println(answer);
			System.out.println(Arrays.toString(visit));
		}
	}
	private static void logic() {
		for(int i=1;i<=N;i++){
			if(visit[i]==false){
				set = new HashSet<Integer>();
				System.out.println("학생번호");
				dfs(i);
				System.out.println(Arrays.toString(visit));
				System.out.println(answer);
				System.out.println();
			}
		}
	}
	/*
	 * 

1
7
3 1 3 7 3 4 6

1
7
7 6 7 6 6 7 3

1
6
2 3 4 5 6 2

1
7
3 1 3 7 3 4 6
	 */
	private static boolean dfs(int num){
		System.out.println("들어온번호"+num);
		if(num==students[num]){//타고 오다가 자기 자신인친구 발견
			visit[num]=true;
			System.out.println("-");
			answer--;
			return false;
		}
		if(visit[students[num]] || visit[num]) {
			return false;
		}
		if(set.contains(students[num])){
			visit[num] = true;
			System.out.println("--");
			answer--;
			start = students[num];
			System.out.println(start);
			return true;
		}
		set.add(num);
		
		if(dfs(students[num])) {
			System.out.println("---");
			System.out.println("디엪"+num);
			visit[num] = true;
			answer--;
		}
		
		if(num==start){//타고 오다가 사이클을 찾음
			visit[num]=true;
			System.out.println("----");
			System.out.println("스타트값"+start);
			return false;
		}
		return false;
		
	}
	private static void setData() throws NumberFormatException, IOException {
		N = Integer.parseInt(br.readLine());
		students = new int[N+1];
		visit = new boolean[N+1];
		noncycle = new boolean[N+1];
		st = new StringTokenizer(br.readLine());
		for(int i=1;i<=N;i++) students[i] = Integer.parseInt(st.nextToken());
		answer=N;
		answer2=0;
	}
}







// 2 3 4 5 6 7 4
