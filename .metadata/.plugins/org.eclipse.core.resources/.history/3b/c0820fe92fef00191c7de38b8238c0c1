package Samsung;

/*
 * 시작 547
 * 
 * 
 */
import java.util.Scanner;

public class 모의_보호필름 {
	static int D,W,K; //row,col,합격기준
	static int[][] film;
	static int[][] testingFilm;
	static int[] testData;
	static int inertDrugCount;
	public static void main(String[] args) {
		Scanner sc = new Scanner(System.in);
		int T = sc.nextInt();
		for(int testcase=1;testcase<=T;testcase++){
			D = sc.nextInt();
			W = sc.nextInt();
			K = sc.nextInt();
			film = new int[D][W];
			
			for(int row=0;row<D;row++)
				for(int col=0;col<M;col++) film[row][col] = sc.nextInt();
			
			while(true){
				if(performanceTest()) break;
				else{//약품 추가
					inertDrugCount++;
					testData = new int[inertDrugCount];
					nCr(0,0);
				}
			}
			
		}
	}
	private static void nCr(int idx, int cnt) {
		if(cnt==inertDrugCount){ //D 위치 조합 경우의수.
			setTestingFilm();
			insertDrug();
			return;
		}
		for(int i=idx;i<D;i++){
			testData[cnt] = i;
			nCr(i+1,cnt+1);
		}
	}
	private static void insertDrug() {
		
	}
	private static void setTestingFilm() {
		for(int row=0;row<D;row++)
			for(int col=0;col<W;col++) testingFilm[row][col] = film[row][col];
	}
	private static boolean performanceTest(){
		boolean OK = true;
		
		for(int col=0;col<W;col++){
			int drug = testingFilm[0][col]; 
			int cnt=1;
			for(int row=1;row<D;row++){
				if(cnt==K) break;
				if(drug==testingFilm[row][col]) {
					cnt++;
				}else {
					drug = testingFilm[row][col];
					cnt=1;
				}
			}
			if(cnt!=K) {
				OK=false;
				break;
			}
		}
		if(OK) return true;
		else return false;
	}
}
